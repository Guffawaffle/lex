{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/Guffawaffle/lex/schemas/alias-table.json",
  "title": "Lex Alias Table Schema",
  "description": "Schema for module ID alias tables, supporting shorthand notation, historical renames, and typo correction",
  "type": "object",
  "required": ["version", "aliases"],
  "additionalProperties": false,
  "properties": {
    "version": {
      "type": "string",
      "description": "Alias table format version",
      "enum": ["1.0"]
    },
    "description": {
      "type": "string",
      "description": "Human-readable description of this alias table"
    },
    "aliases": {
      "type": "object",
      "description": "Map of alias â†’ canonical module ID",
      "patternProperties": {
        "^[a-zA-Z0-9_/-]+$": {
          "type": "object",
          "required": ["canonical", "confidence", "reason"],
          "additionalProperties": false,
          "properties": {
            "canonical": {
              "type": "string",
              "description": "The canonical module ID as defined in lexmap.policy.json",
              "pattern": "^[a-zA-Z0-9_/-]+$"
            },
            "confidence": {
              "type": "number",
              "description": "Confidence score (1.0 = explicit alias, <1.0 = fuzzy match)",
              "minimum": 0.0,
              "maximum": 1.0
            },
            "reason": {
              "type": "string",
              "description": "Why this alias exists (for documentation/auditing)",
              "examples": [
                "shorthand",
                "team convention",
                "historical rename",
                "common typo"
              ]
            },
            "deprecated": {
              "type": "boolean",
              "description": "Whether this alias is deprecated and should trigger a warning",
              "default": false
            },
            "added_date": {
              "type": "string",
              "format": "date",
              "description": "When this alias was added (ISO 8601 date)"
            }
          }
        }
      }
    },
    "recommendations": {
      "type": "object",
      "description": "Recommendations for how to use this alias table",
      "additionalProperties": false,
      "properties": {
        "use_with_warnings": {
          "type": "boolean",
          "description": "Whether to warn users when aliases are used",
          "default": true
        },
        "min_confidence_for_auto_apply": {
          "type": "number",
          "description": "Minimum confidence to auto-apply without prompting",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.95
        },
        "strict_mode_allows_aliases": {
          "type": "boolean",
          "description": "Whether strict mode (CI) allows explicit aliases",
          "default": false
        }
      }
    }
  }
}
