# Lex Instructions (Canonical Source)

> **This file is the canonical source of AI assistant guidance for this repository.**
> Content from here is projected to host files (e.g., `.github/copilot-instructions.md`).

---

## The Lex vs LexRunner Separation

**Before editing schemas, Frames, or `lex.yaml`, read:**
- [`docs/FOUNDERS_NOTE.md`](../../docs/FOUNDERS_NOTE.md) — The philosophy
- [`docs/CONTRACT_SURFACE.md`](../../docs/CONTRACT_SURFACE.md) — The contract surface (v1)

**Key distinction:**
- **Lex** is the constitution — contracts, schemas, memory, policy primitives
- **LexRunner** is one government — an implementation that happens to be built by the same author

Do not leak LexRunner-specific behavior into Lex's open contracts. If you're unsure whether something belongs in Lex (the contract layer) or LexRunner (the implementation), default to keeping it out of Lex.

---

## What Lex Does in This Repository

Lex provides the contract layer for AI-assisted development:

- **Memory (Frames):** Immutable episodic context with defined schema
- **Policy:** Module ownership, dependency rules, kill patterns
- **Instructions:** Canonical source → host-specific projections
- **Atlas:** Code structure mapping

---

## Key Files

| File | Purpose |
|------|---------|
| `lexmap.policy.json` | Module ownership and dependency policy |
| `**/CONTRACT.md` | Frozen interface contracts — do not modify without explicit approval |
| `.smartergpt/` | Local workspace (gitignored, ephemeral) |
| `lex.yaml` | Configuration for instruction generation |
| `docs/FOUNDERS_NOTE.md` | Philosophy: Lex = constitution, LexRunner = government |
| `docs/CONTRACT_SURFACE.md` | What runners must respect to be Lex-compatible |

---

## Situational Guidance

### When Planning Work

1. Check `lex recall "topic"` for prior context
2. Review `lex timeline` for recent work history
3. Read policy files before proposing architectural changes

### When Editing Code

1. Respect module boundaries in `lexmap.policy.json`
2. Honor frozen contracts (`CONTRACT.md` files)
3. Use `lex remember` to capture important context

### When Editing Lex Contracts

**Be especially careful.** Lex contracts are the stable surface that other tools target.

1. Read `docs/FOUNDERS_NOTE.md` first
2. Do not add LexRunner-specific knobs to `lex.yaml` or Frame schemas
3. Breaking changes require a major version bump
4. Document changes in `docs/CONTRACT_SURFACE.md`

---

## Memory Commands

```bash
# Store context for future sessions
lex remember --reference-point "feature-name" --summary "What was accomplished"

# Retrieve relevant context
lex recall "search query"

# View recent work history
lex timeline

# Check policy compliance
lex check
```

---

## Notes

- This file is regenerated by `lex instructions generate`
- Manual edits will be overwritten
- Customize behavior via `lex.yaml` configuration

---

*— Written by Lex, Signed by Joe (Guffawaffle), November 2025*
